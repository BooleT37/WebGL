<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" type="text/css" href="style.css">
	<script id="vertex_shader" type="x-shader/x-vertex">
		attribute vec2 a_position;
		uniform mat3 u_matrix;
		varying vec2 v_texCoord;
		void main() {
			gl_Position = vec4(u_matrix * vec3(a_position, 1), 1);
			
			// because we're using a unit quad we can just use
			// the same data for our texcoords.
			v_texCoord = a_position;
		}
	</script>
	<script id="fragment_shader_base" type="x-shader/x-fragment">
		precision mediump float;
		uniform sampler2D u_image;
		varying vec2 v_texCoord;
		
		void main() {
			gl_FragColor = texture2D(u_image, v_texCoord);;
		}
	</script>
	<script id="fragment_shader_grayscale" type="x-shader/x-fragment">
		precision mediump float;
		uniform sampler2D u_image;
		varying vec2 v_texCoord;
		
		void main() {
			vec4 color = texture2D(u_image, v_texCoord);
			float avg = (color.r + color.g + color.b) / 3.0;
			color.rgb = vec3(avg, avg, avg);
			gl_FragColor = color;
		}
	</script>
	<script src="WebglImageProcessor.js"></script>
	<script src="scripts.js"></script>
	<link rel="icon" type="image/ico" href="favicon.ico">
	<title>WebGL experimentation</title>
</head>
<body onload="onLoad()">
	<div id="wrapper">
		<div id="image_area">
			<div id="title">Загрузите файл с компьютера:</div>
			<input type="file" id="file_input"><br/>
			<canvas id="canvas" width="640" height="480" style="border:1px solid #c3c3c3;">Doesn't work :(</canvas>
		</div>
		<div id="buttons_area">
			<button id="turn_grayscale_button" disabled="disabled">Сделать черно-белым</button>
			<button id="cancel_button" disabled="disabled">Отменить</button>
			<button id="save_button" disabled="disabled">Сохранить изображение</button>
		</div>
	</div>
</body>
</html>